import{bi as E,a1 as O,b as L,r as h,e as F,t as G,z as i,bj as Q,o as V,n as s,j as n,F as R,g as d,h as g,i as u,k as m,S as U,s as W,v as z,w as Y,x as $,l as c,I as f,B as S,au as J,c as Z}from"./index-ChY-99TT.js";import{C as nn}from"./content-section-ChENuYIM.js";import{u as v}from"./useMutation-dErWOMDE.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=E("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),on=JSON.parse('[{"id":17,"name":"Ngân hàng TMCP Công thương Việt Nam (VietinBank)","code":"ICB","bin":"970415","shortName":"VietinBank","logo":"https://api.vietqr.io/img/ICB.png","transferSupported":1,"lookupSupported":1,"short_name":"VietinBank","support":3,"isTransfer":1,"swift_code":"ICBVVNVX"},{"id":43,"name":"Ngân hàng TMCP Ngoại Thương Việt Nam (Vietcombank)","code":"VCB","bin":"970436","shortName":"Vietcombank","logo":"https://api.vietqr.io/img/VCB.png","transferSupported":1,"lookupSupported":1,"short_name":"Vietcombank","support":3,"isTransfer":1,"swift_code":"BFTVVNVX"},{"id":4,"name":"Ngân hàng TMCP Đầu tư và Phát triển Việt Nam (BIDV)","code":"BIDV","bin":"970418","shortName":"BIDV","logo":"https://api.vietqr.io/img/BIDV.png","transferSupported":1,"lookupSupported":1,"short_name":"BIDV","support":3,"isTransfer":1,"swift_code":"BIDVVNVX"},{"id":42,"name":"Ngân hàng Nông nghiệp và Phát triển Nông thôn Việt Nam (Agribank)","code":"VBA","bin":"970405","shortName":"Agribank","logo":"https://api.vietqr.io/img/VBA.png","transferSupported":1,"lookupSupported":1,"short_name":"Agribank","support":3,"isTransfer":1,"swift_code":"VBAAVNVX"},{"id":26,"name":"Ngân hàng TMCP Phương Đông (OCB)","code":"OCB","bin":"970448","shortName":"OCB","logo":"https://api.vietqr.io/img/OCB.png","transferSupported":1,"lookupSupported":1,"short_name":"OCB","support":3,"isTransfer":1,"swift_code":"ORCOVNVX"},{"id":21,"name":"Ngân hàng TMCP Quân đội (MBBank)","code":"MB","bin":"970422","shortName":"MBBank","logo":"https://api.vietqr.io/img/MB.png","transferSupported":1,"lookupSupported":1,"short_name":"MBBank","support":3,"isTransfer":1,"swift_code":"MSCBVNVX"},{"id":38,"name":"Ngân hàng TMCP Kỹ thương Việt Nam (Techcombank)","code":"TCB","bin":"970407","shortName":"Techcombank","logo":"https://api.vietqr.io/img/TCB.png","transferSupported":1,"lookupSupported":1,"short_name":"Techcombank","support":3,"isTransfer":1,"swift_code":"VTCBVNVX"},{"id":2,"name":"Ngân hàng TMCP Á Châu (ACB)","code":"ACB","bin":"970416","shortName":"ACB","logo":"https://api.vietqr.io/img/ACB.png","transferSupported":1,"lookupSupported":1,"short_name":"ACB","support":3,"isTransfer":1,"swift_code":"ASCBVNVX"},{"id":47,"name":"Ngân hàng TMCP Việt Nam Thịnh Vượng (VPBank)","code":"VPB","bin":"970432","shortName":"VPBank","logo":"https://api.vietqr.io/img/VPB.png","transferSupported":1,"lookupSupported":1,"short_name":"VPBank","support":3,"isTransfer":1,"swift_code":"VPBKVNVX"},{"id":39,"name":"Ngân hàng TMCP Tiên Phong (TPBank)","code":"TPB","bin":"970423","shortName":"TPBank","logo":"https://api.vietqr.io/img/TPB.png","transferSupported":1,"lookupSupported":1,"short_name":"TPBank","support":3,"isTransfer":1,"swift_code":"TPBVVNVX"},{"id":36,"name":"Ngân hàng TMCP Sài Gòn Thương Tín (Sacombank)","code":"STB","bin":"970403","shortName":"Sacombank","logo":"https://api.vietqr.io/img/STB.png","transferSupported":1,"lookupSupported":1,"short_name":"Sacombank","support":3,"isTransfer":1,"swift_code":"SGTTVNVX"},{"id":12,"name":"Ngân hàng TMCP Phát triển Thành phố Hồ Chí Minh (HDBank)","code":"HDB","bin":"970437","shortName":"HDBank","logo":"https://api.vietqr.io/img/HDB.png","transferSupported":1,"lookupSupported":1,"short_name":"HDBank","support":3,"isTransfer":1,"swift_code":"HDBCVNVX"},{"id":44,"name":"Ngân hàng TMCP Bản Việt (VietCapitalBank)","code":"VCCB","bin":"970454","shortName":"VietCapitalBank","logo":"https://api.vietqr.io/img/VCCB.png","transferSupported":1,"lookupSupported":1,"short_name":"VietCapitalBank","support":3,"isTransfer":1,"swift_code":"VCBCVNVX"},{"id":31,"name":"Ngân hàng TMCP Sài Gòn (SCB)","code":"SCB","bin":"970429","shortName":"SCB","logo":"https://api.vietqr.io/img/SCB.png","transferSupported":1,"lookupSupported":1,"short_name":"SCB","support":3,"isTransfer":1,"swift_code":"SACLVNVX"},{"id":45,"name":"Ngân hàng TMCP Quốc tế Việt Nam (VIB)","code":"VIB","bin":"970441","shortName":"VIB","logo":"https://api.vietqr.io/img/VIB.png","transferSupported":1,"lookupSupported":1,"short_name":"VIB","support":3,"isTransfer":1,"swift_code":"VNIBVNVX"},{"id":35,"name":"Ngân hàng TMCP Sài Gòn - Hà Nội (SHB)","code":"SHB","bin":"970443","shortName":"SHB","logo":"https://api.vietqr.io/img/SHB.png","transferSupported":1,"lookupSupported":1,"short_name":"SHB","support":3,"isTransfer":1,"swift_code":"SHBAVNVX"},{"id":10,"name":"Ngân hàng TMCP Xuất Nhập khẩu Việt Nam (Eximbank)","code":"EIB","bin":"970431","shortName":"Eximbank","logo":"https://api.vietqr.io/img/EIB.png","transferSupported":1,"lookupSupported":1,"short_name":"Eximbank","support":3,"isTransfer":1,"swift_code":"EBVIVNVX"},{"id":22,"name":"Ngân hàng TMCP Hàng Hải (MSB)","code":"MSB","bin":"970426","shortName":"MSB","logo":"https://api.vietqr.io/img/MSB.png","transferSupported":1,"lookupSupported":1,"short_name":"MSB","support":3,"isTransfer":1,"swift_code":"MCOBVNVX"},{"id":53,"name":"TMCP Việt Nam Thịnh Vượng - Ngân hàng số CAKE by VPBank (CAKE)","code":"CAKE","bin":"546034","shortName":"CAKE","logo":"https://api.vietqr.io/img/CAKE.png","transferSupported":1,"lookupSupported":1,"short_name":"CAKE","support":3,"isTransfer":1,"swift_code":null},{"id":54,"name":"TMCP Việt Nam Thịnh Vượng - Ngân hàng số Ubank by VPBank (Ubank)","code":"Ubank","bin":"546035","shortName":"Ubank","logo":"https://api.vietqr.io/img/UBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"Ubank","support":3,"isTransfer":1,"swift_code":null},{"id":58,"name":"Ngân hàng số Timo by Ban Viet Bank (Timo by Ban Viet Bank) (Timo)","code":"TIMO","bin":"963388","shortName":"Timo","logo":"https://vietqr.net/portal-service/resources/icons/TIMO.png","transferSupported":1,"lookupSupported":0,"short_name":"Timo","support":0,"isTransfer":1,"swift_code":null},{"id":57,"name":"Tổng Công ty Dịch vụ số Viettel - Chi nhánh tập đoàn công nghiệp viễn thông Quân Đội (ViettelMoney)","code":"VTLMONEY","bin":"971005","shortName":"ViettelMoney","logo":"https://api.vietqr.io/img/VIETTELMONEY.png","transferSupported":0,"lookupSupported":1,"short_name":"ViettelMoney","support":0,"isTransfer":0,"swift_code":null},{"id":56,"name":"VNPT Money (VNPTMoney)","code":"VNPTMONEY","bin":"971011","shortName":"VNPTMoney","logo":"https://api.vietqr.io/img/VNPTMONEY.png","transferSupported":0,"lookupSupported":1,"short_name":"VNPTMoney","support":0,"isTransfer":0,"swift_code":null},{"id":34,"name":"Ngân hàng TMCP Sài Gòn Công Thương (SaigonBank)","code":"SGICB","bin":"970400","shortName":"SaigonBank","logo":"https://api.vietqr.io/img/SGICB.png","transferSupported":1,"lookupSupported":1,"short_name":"SaigonBank","support":3,"isTransfer":1,"swift_code":"SBITVNVX"},{"id":3,"name":"Ngân hàng TMCP Bắc Á (BacABank)","code":"BAB","bin":"970409","shortName":"BacABank","logo":"https://api.vietqr.io/img/BAB.png","transferSupported":1,"lookupSupported":1,"short_name":"BacABank","support":3,"isTransfer":1,"swift_code":"NASCVNVX"},{"id":30,"name":"Ngân hàng TMCP Đại Chúng Việt Nam (PVcomBank)","code":"PVCB","bin":"970412","shortName":"PVcomBank","logo":"https://api.vietqr.io/img/PVCB.png","transferSupported":1,"lookupSupported":1,"short_name":"PVcomBank","support":3,"isTransfer":1,"swift_code":"WBVNVNVX"},{"id":27,"name":"Ngân hàng Thương mại TNHH MTV Đại Dương (Oceanbank)","code":"Oceanbank","bin":"970414","shortName":"Oceanbank","logo":"https://api.vietqr.io/img/OCEANBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"Oceanbank","support":3,"isTransfer":1,"swift_code":"OCBKUS3M"},{"id":24,"name":"Ngân hàng TMCP Quốc Dân (NCB)","code":"NCB","bin":"970419","shortName":"NCB","logo":"https://api.vietqr.io/img/NCB.png","transferSupported":1,"lookupSupported":1,"short_name":"NCB","support":3,"isTransfer":1,"swift_code":"NVBAVNVX"},{"id":37,"name":"Ngân hàng TNHH MTV Shinhan Việt Nam (ShinhanBank)","code":"SHBVN","bin":"970424","shortName":"ShinhanBank","logo":"https://api.vietqr.io/img/SHBVN.png","transferSupported":1,"lookupSupported":1,"short_name":"ShinhanBank","support":3,"isTransfer":1,"swift_code":"SHBKVNVX"},{"id":1,"name":"Ngân hàng TMCP An Bình (ABBANK)","code":"ABB","bin":"970425","shortName":"ABBANK","logo":"https://api.vietqr.io/img/ABB.png","transferSupported":1,"lookupSupported":1,"short_name":"ABBANK","support":3,"isTransfer":1,"swift_code":"ABBKVNVX"},{"id":41,"name":"Ngân hàng TMCP Việt Á (VietABank)","code":"VAB","bin":"970427","shortName":"VietABank","logo":"https://api.vietqr.io/img/VAB.png","transferSupported":1,"lookupSupported":1,"short_name":"VietABank","support":3,"isTransfer":1,"swift_code":"VNACVNVX"},{"id":23,"name":"Ngân hàng TMCP Nam Á (NamABank)","code":"NAB","bin":"970428","shortName":"NamABank","logo":"https://api.vietqr.io/img/NAB.png","transferSupported":1,"lookupSupported":1,"short_name":"NamABank","support":3,"isTransfer":1,"swift_code":"NAMAVNVX"},{"id":29,"name":"Ngân hàng TMCP Xăng dầu Petrolimex (PGBank)","code":"PGB","bin":"970430","shortName":"PGBank","logo":"https://api.vietqr.io/img/PGB.png","transferSupported":1,"lookupSupported":1,"short_name":"PGBank","support":3,"isTransfer":1,"swift_code":"PGBLVNVX"},{"id":46,"name":"Ngân hàng TMCP Việt Nam Thương Tín (VietBank)","code":"VIETBANK","bin":"970433","shortName":"VietBank","logo":"https://api.vietqr.io/img/VIETBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"VietBank","support":3,"isTransfer":1,"swift_code":"VNTTVNVX"},{"id":5,"name":"Ngân hàng TMCP Bảo Việt (BaoVietBank)","code":"BVB","bin":"970438","shortName":"BaoVietBank","logo":"https://api.vietqr.io/img/BVB.png","transferSupported":1,"lookupSupported":1,"short_name":"BaoVietBank","support":3,"isTransfer":1,"swift_code":"BVBVVNVX"},{"id":33,"name":"Ngân hàng TMCP Đông Nam Á (SeABank)","code":"SEAB","bin":"970440","shortName":"SeABank","logo":"https://api.vietqr.io/img/SEAB.png","transferSupported":1,"lookupSupported":1,"short_name":"SeABank","support":3,"isTransfer":1,"swift_code":"SEAVVNVX"},{"id":52,"name":"Ngân hàng Hợp tác xã Việt Nam (COOPBANK)","code":"COOPBANK","bin":"970446","shortName":"COOPBANK","logo":"https://api.vietqr.io/img/COOPBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"COOPBANK","support":3,"isTransfer":1,"swift_code":null},{"id":20,"name":"Ngân hàng TMCP Lộc Phát Việt Nam (LPBank)","code":"LPB","bin":"970449","shortName":"LPBank","logo":"https://api.vietqr.io/img/LPB.png","transferSupported":1,"lookupSupported":1,"short_name":"LPBank","support":3,"isTransfer":1,"swift_code":"LVBKVNVX"},{"id":19,"name":"Ngân hàng TMCP Kiên Long (KienLongBank)","code":"KLB","bin":"970452","shortName":"KienLongBank","logo":"https://api.vietqr.io/img/KLB.png","transferSupported":1,"lookupSupported":1,"short_name":"KienLongBank","support":3,"isTransfer":1,"swift_code":"KLBKVNVX"},{"id":55,"name":"Ngân hàng Đại chúng TNHH Kasikornbank (KBank)","code":"KBank","bin":"668888","shortName":"KBank","logo":"https://api.vietqr.io/img/KBANK.png","transferSupported":1,"lookupSupported":1,"short_name":"KBank","support":3,"isTransfer":1,"swift_code":"KASIVNVX"},{"id":50,"name":"Ngân hàng Kookmin - Chi nhánh Hà Nội (KookminHN)","code":"KBHN","bin":"970462","shortName":"KookminHN","logo":"https://api.vietqr.io/img/KBHN.png","transferSupported":0,"lookupSupported":0,"short_name":"KookminHN","support":0,"isTransfer":0,"swift_code":null},{"id":60,"name":"Ngân hàng KEB Hana – Chi nhánh Thành phố Hồ Chí Minh (KEBHanaHCM)","code":"KEBHANAHCM","bin":"970466","shortName":"KEBHanaHCM","logo":"https://api.vietqr.io/img/KEBHANAHCM.png","transferSupported":0,"lookupSupported":0,"short_name":"KEBHanaHCM","support":0,"isTransfer":0,"swift_code":null},{"id":61,"name":"Ngân hàng KEB Hana – Chi nhánh Hà Nội (KEBHANAHN)","code":"KEBHANAHN","bin":"970467","shortName":"KEBHANAHN","logo":"https://api.vietqr.io/img/KEBHANAHN.png","transferSupported":0,"lookupSupported":0,"short_name":"KEBHANAHN","support":0,"isTransfer":0,"swift_code":null},{"id":62,"name":"Công ty Tài chính TNHH MTV Mirae Asset (Việt Nam) (MAFC)","code":"MAFC","bin":"977777","shortName":"MAFC","logo":"https://api.vietqr.io/img/MAFC.png","transferSupported":0,"lookupSupported":0,"short_name":"MAFC","support":0,"isTransfer":0,"swift_code":null},{"id":59,"name":"Ngân hàng Citibank, N.A. - Chi nhánh Hà Nội (Citibank)","code":"CITIBANK","bin":"533948","shortName":"Citibank","logo":"https://api.vietqr.io/img/CITIBANK.png","transferSupported":0,"lookupSupported":0,"short_name":"Citibank","support":0,"isTransfer":0,"swift_code":null},{"id":51,"name":"Ngân hàng Kookmin - Chi nhánh Thành phố Hồ Chí Minh (KookminHCM)","code":"KBHCM","bin":"970463","shortName":"KookminHCM","logo":"https://api.vietqr.io/img/KBHCM.png","transferSupported":0,"lookupSupported":0,"short_name":"KookminHCM","support":0,"isTransfer":0,"swift_code":null},{"id":63,"name":"Ngân hàng Chính sách Xã hội (VBSP)","code":"VBSP","bin":"999888","shortName":"VBSP","logo":"https://api.vietqr.io/img/VBSP.png","transferSupported":0,"lookupSupported":0,"short_name":"VBSP","support":0,"isTransfer":0,"swift_code":null},{"id":49,"name":"Ngân hàng TNHH MTV Woori Việt Nam (Woori)","code":"WVN","bin":"970457","shortName":"Woori","logo":"https://api.vietqr.io/img/WVN.png","transferSupported":1,"lookupSupported":1,"short_name":"Woori","support":0,"isTransfer":1,"swift_code":null},{"id":48,"name":"Ngân hàng Liên doanh Việt - Nga (VRB)","code":"VRB","bin":"970421","shortName":"VRB","logo":"https://api.vietqr.io/img/VRB.png","transferSupported":0,"lookupSupported":1,"short_name":"VRB","support":0,"isTransfer":0,"swift_code":null},{"id":40,"name":"Ngân hàng United Overseas - Chi nhánh TP. Hồ Chí Minh (UnitedOverseas)","code":"UOB","bin":"970458","shortName":"UnitedOverseas","logo":"https://api.vietqr.io/img/UOB.png","transferSupported":0,"lookupSupported":1,"short_name":"UnitedOverseas","support":0,"isTransfer":0,"swift_code":null},{"id":32,"name":"Ngân hàng TNHH MTV Standard Chartered Bank Việt Nam (StandardChartered)","code":"SCVN","bin":"970410","shortName":"StandardChartered","logo":"https://api.vietqr.io/img/SCVN.png","transferSupported":0,"lookupSupported":1,"short_name":"StandardChartered","support":0,"isTransfer":0,"swift_code":"SCBLVNVX"},{"id":28,"name":"Ngân hàng TNHH MTV Public Việt Nam (PublicBank)","code":"PBVN","bin":"970439","shortName":"PublicBank","logo":"https://api.vietqr.io/img/PBVN.png","transferSupported":0,"lookupSupported":1,"short_name":"PublicBank","support":0,"isTransfer":0,"swift_code":"VIDPVNVX"},{"id":25,"name":"Ngân hàng Nonghyup - Chi nhánh Hà Nội (Nonghyup)","code":"NHB HN","bin":"801011","shortName":"Nonghyup","logo":"https://api.vietqr.io/img/NHB.png","transferSupported":0,"lookupSupported":0,"short_name":"Nonghyup","support":0,"isTransfer":0,"swift_code":null},{"id":18,"name":"Ngân hàng TNHH Indovina (IndovinaBank)","code":"IVB","bin":"970434","shortName":"IndovinaBank","logo":"https://api.vietqr.io/img/IVB.png","transferSupported":0,"lookupSupported":1,"short_name":"IndovinaBank","support":0,"isTransfer":0,"swift_code":null},{"id":16,"name":"Ngân hàng Công nghiệp Hàn Quốc - Chi nhánh TP. Hồ Chí Minh (IBKHCM)","code":"IBK - HCM","bin":"970456","shortName":"IBKHCM","logo":"https://api.vietqr.io/img/IBK.png","transferSupported":0,"lookupSupported":0,"short_name":"IBKHCM","support":0,"isTransfer":0,"swift_code":null},{"id":15,"name":"Ngân hàng Công nghiệp Hàn Quốc - Chi nhánh Hà Nội (IBKHN)","code":"IBK - HN","bin":"970455","shortName":"IBKHN","logo":"https://api.vietqr.io/img/IBK.png","transferSupported":0,"lookupSupported":0,"short_name":"IBKHN","support":0,"isTransfer":0,"swift_code":null},{"id":14,"name":"Ngân hàng TNHH MTV HSBC (Việt Nam) (HSBC)","code":"HSBC","bin":"458761","shortName":"HSBC","logo":"https://api.vietqr.io/img/HSBC.png","transferSupported":0,"lookupSupported":1,"short_name":"HSBC","support":0,"isTransfer":0,"swift_code":"HSBCVNVX"},{"id":13,"name":"Ngân hàng TNHH MTV Hong Leong Việt Nam (HongLeong)","code":"HLBVN","bin":"970442","shortName":"HongLeong","logo":"https://api.vietqr.io/img/HLBVN.png","transferSupported":0,"lookupSupported":1,"short_name":"HongLeong","support":0,"isTransfer":0,"swift_code":"HLBBVNVX"},{"id":11,"name":"Ngân hàng Thương mại TNHH MTV Dầu Khí Toàn Cầu (GPBank)","code":"GPB","bin":"970408","shortName":"GPBank","logo":"https://api.vietqr.io/img/GPB.png","transferSupported":0,"lookupSupported":1,"short_name":"GPBank","support":0,"isTransfer":0,"swift_code":"GBNKVNVX"},{"id":9,"name":"Ngân hàng TMCP Đông Á (DongABank)","code":"DOB","bin":"970406","shortName":"DongABank","logo":"https://api.vietqr.io/img/DOB.png","transferSupported":0,"lookupSupported":1,"short_name":"DongABank","support":0,"isTransfer":0,"swift_code":"EACBVNVX"},{"id":8,"name":"DBS Bank Ltd - Chi nhánh Thành phố Hồ Chí Minh (DBSBank)","code":"DBS","bin":"796500","shortName":"DBSBank","logo":"https://api.vietqr.io/img/DBS.png","transferSupported":0,"lookupSupported":0,"short_name":"DBSBank","support":0,"isTransfer":0,"swift_code":"DBSSVNVX"},{"id":7,"name":"Ngân hàng TNHH MTV CIMB Việt Nam (CIMB)","code":"CIMB","bin":"422589","shortName":"CIMB","logo":"https://api.vietqr.io/img/CIMB.png","transferSupported":1,"lookupSupported":1,"short_name":"CIMB","support":0,"isTransfer":1,"swift_code":"CIBBVNVN"},{"id":6,"name":"Ngân hàng Thương mại TNHH MTV Xây dựng Việt Nam (CBBank)","code":"CBB","bin":"970444","shortName":"CBBank","logo":"https://api.vietqr.io/img/CBB.png","transferSupported":0,"lookupSupported":1,"short_name":"CBBank","support":0,"isTransfer":0,"swift_code":"GTBAVNVX"}]'),tn={data:on},rn=i.object({bankAccounts:i.array(i.object({bank_name:i.string().min(2,{message:"Tên ngân hàng là bắt buộc."}),account_number:i.string().min(5,{message:"Số tài khoản là bắt buộc."}),account_holder:i.string().min(2,{message:"Tên chủ tài khoản là bắt buộc."})})).min(1,{message:"Cần ít nhất một tài khoản ngân hàng."}),qr_code:i.union([i.instanceof(File),i.string(),i.undefined()]).optional()}),an={bankAccounts:[{bank_name:"",account_number:"",account_holder:""}],qr_code:void 0};function sn(){const A=O(),{setAuth:H,user:t,accessToken:k}=L(),[M,P]=h.useState([]),[C,l]=h.useState(null),[T,b]=h.useState(null),[q,B]=h.useState(!1),r=F({resolver:G(rn),defaultValues:an,mode:"onChange"}),{fields:K,remove:w}=Q({control:r.control,name:"bankAccounts"});h.useEffect(()=>{P(tn.data||[]),t&&(r.reset({bankAccounts:t.bank_details||[{bank_name:"",account_number:"",account_holder:""}],qr_code:t.qr_code_url}),t.qr_code_url&&l(t.qr_code_url))},[t,r]);const N=v({mutationFn:e=>V.updateAccount(e),onSuccess:async()=>{s({title:"Cập nhật thông tin ngân hàng thành công!"});try{const e=await V.getCurrentUser();if(k&&e){const{data:o}=e;H(o.user,k)}}catch(e){s({variant:"destructive",title:"Lỗi khi đồng bộ người dùng",description:e.message||"Không thể cập nhật thông tin người dùng."})}A.invalidateQueries({queryKey:["currentUser"]})},onError:e=>{s({variant:"destructive",title:"Lỗi khi cập nhật thông tin ngân hàng",description:e.message,duration:5e3})}}),x=v({mutationFn:e=>V.uploadQr(e),onError:e=>{s({variant:"destructive",title:"Lỗi khi tải lên mã QR",description:e.message,duration:5e3})}}),_=e=>{if(!e.type.startsWith("image/")){s({variant:"destructive",title:"Lỗi định dạng file",description:"Vui lòng chọn file hình ảnh (jpg, png, v.v.)."});return}const o=new FileReader;o.onloadend=()=>{l(o.result),b(e),r.setValue("qr_code",e)},o.readAsDataURL(e)},I=e=>{e.preventDefault(),B(!0)},y=e=>{e.preventDefault(),B(!1)},j=e=>{e.preventDefault(),B(!1);const o=e.dataTransfer.files;o&&o.length>0&&_(o[0])},X=()=>{l(null),b(null),r.setValue("qr_code",void 0),s({title:"Đã xóa mã QR thành công!"})},D=async e=>{if(!(t!=null&&t.id)){s({variant:"destructive",title:"Lỗi",description:"Không tìm thấy thông tin người dùng.",duration:5e3});return}let o;if(T&&e.qr_code instanceof File)try{o=(await x.mutateAsync(T)).url}catch{return}else typeof e.qr_code=="string"&&(o=e.qr_code);const a={id:t.id,bankAccounts:e.bankAccounts,qr_code:o};N.mutate(a)};return t?n.jsx(R,{...r,children:n.jsxs("form",{onSubmit:r.handleSubmit(D),className:"space-y-8",children:[K.map((e,o)=>n.jsxs("div",{className:"space-y-2",children:[n.jsx(d,{control:r.control,name:`bankAccounts.${o}.bank_name`,render:({field:a})=>n.jsxs(g,{children:[n.jsx(u,{children:"Tên ngân hàng"}),n.jsx(m,{children:n.jsxs(U,{value:a.value,onValueChange:a.onChange,children:[n.jsx(W,{className:"border-gray-300",children:n.jsx(z,{placeholder:"Chọn ngân hàng"})}),n.jsx(Y,{children:M.map(p=>n.jsx($,{value:p.name,children:p.name},p.id))})]})}),n.jsx(c,{})]})}),n.jsx(d,{control:r.control,name:`bankAccounts.${o}.account_number`,render:({field:a})=>n.jsxs(g,{children:[n.jsx(u,{children:"Số tài khoản"}),n.jsx(m,{children:n.jsx(f,{placeholder:"Ví dụ: 1234567890",...a})}),n.jsx(c,{})]})}),n.jsx(d,{control:r.control,name:`bankAccounts.${o}.account_holder`,render:({field:a})=>n.jsxs(g,{children:[n.jsx(u,{children:"Chủ tài khoản"}),n.jsx(m,{children:n.jsx(f,{placeholder:"Ví dụ: Nguyen Van A",...a})}),n.jsx(c,{})]})}),o>0&&n.jsx(S,{type:"button",variant:"destructive",onClick:()=>w(o),className:"mt-2",children:"Xóa tài khoản"})]},e.id)),n.jsx(d,{control:r.control,name:"qr_code",render:()=>n.jsxs(g,{children:[n.jsx(u,{children:"Mã QR"}),n.jsx(m,{children:n.jsx("div",{className:"relative w-32 h-32",children:C?n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-md w-32 h-32 flex items-center justify-center bg-gray-50",children:[n.jsx("img",{src:C,alt:"QR Code",className:"w-full h-full object-cover"}),n.jsx(S,{variant:"ghost",size:"icon",className:"absolute bg-gray-50 top-2 right-2 h-6 w-6 text-red-500 hover:text-red-700",onClick:X,children:n.jsx(en,{className:"h-4 w-4"})})]}):n.jsxs("div",{className:`border-2 border-dashed rounded-md w-32 h-32 flex items-center justify-center bg-gray-50 ${q?"border-blue-500 bg-blue-50":"border-gray-300"}`,onDragOver:I,onDragLeave:y,onDrop:j,children:[n.jsx(f,{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",id:"qr-upload",onChange:e=>{var o;return((o=e.target.files)==null?void 0:o[0])&&_(e.target.files[0])}}),n.jsx("label",{htmlFor:"qr-upload",className:"text-center text-sm text-gray-600 hover:text-gray-800 cursor-pointer px-2",children:"Nhấn vào để tải lên hoặc thả hình vào đây"})]})})}),n.jsx(J,{children:"Tải lên hình ảnh mã QR để hiển thị trên hóa đơn."}),n.jsx(c,{})]})}),n.jsx(S,{type:"submit",disabled:N.isPending,children:N.isPending?"Đang lưu...":"Lưu thay đổi"})]})}):n.jsx("div",{children:"Không tìm thấy thông tin người dùng. Vui lòng đăng nhập lại."})}function pn(){return n.jsx(nn,{title:"Tài khoản",desc:"Cập nhật cài đặt tài khoản của bạn.",children:n.jsx(sn,{})})}const un=Z("/_authenticated/settings/account")({component:pn});export{un as Route};
