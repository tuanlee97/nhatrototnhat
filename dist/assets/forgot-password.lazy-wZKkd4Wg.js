import{r as h,p as u,u as x,e as g,t as p,z as r,j as e,f,F as j,g as F,h as b,i as k,k as N,I as v,l as y,B as L,o as w,A as C,C as S,L as I,c as B}from"./index-ChY-99TT.js";const E=r.object({email:r.string().min(1,{message:"Vui lòng nhập email của bạn"}).email({message:"Địa chỉ email không hợp lệ"})});function R({className:o,...l}){const[t,i]=h.useState(!1),{toast:n}=u(),c=x(),s=g({resolver:p(E),defaultValues:{email:""}});async function m(a){i(!0);try{await w.forgotPassword(a.email),n({title:"Thành công",description:"Liên kết đặt lại mật khẩu đã được gửi đến email của bạn!"}),s.reset(),c({to:"/reset-password-confirmation",search:{email:a.email}})}catch(d){n({title:"Lỗi",description:d.message||"Có lỗi xảy ra, vui lòng thử lại.",variant:"destructive"})}finally{i(!1)}}return e.jsx("div",{className:f("grid gap-6",o),...l,children:e.jsx(j,{...s,children:e.jsx("form",{onSubmit:s.handleSubmit(m),children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{control:s.control,name:"email",render:({field:a})=>e.jsxs(b,{className:"space-y-1",children:[e.jsx(k,{children:"Email"}),e.jsx(N,{children:e.jsx(v,{placeholder:"name@example.com",...a})}),e.jsx(y,{})]})}),e.jsx(L,{className:"mt-2",disabled:t,children:t?"Đang gửi...":"Tiếp tục"})]})})})})}function T(){return e.jsx(C,{children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"mb-2 flex flex-col space-y-2 text-left",children:[e.jsx("h1",{className:"text-md font-semibold tracking-tight",children:"Quên mật khẩu"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Nhập email đã đăng ký và ",e.jsx("br",{})," chúng tôi sẽ gửi cho bạn liên kết để đặt lại mật khẩu."]})]}),e.jsx(R,{}),e.jsxs("p",{className:"mt-4 px-8 text-center text-sm text-muted-foreground",children:["Bạn chưa có tài khoản?"," ",e.jsx(I,{to:"/sign-up",className:"underline underline-offset-4 hover:text-primary",children:"Đăng ký"}),"."]})]})})}const A=B("/(auth)/forgot-password")({component:T});export{A as Route};
